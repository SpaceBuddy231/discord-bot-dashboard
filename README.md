# ü§ñ Discord Bot Management Dashboard

A comprehensive Discord Bot Management System with advanced analytics, auto-moderation, and a modern web dashboard. Built for multi-server support with production-ready features.

> üí° **NEW**: Works **WITHOUT external databases**! Perfect for local development.  
> See [QUICKSTART.md](./QUICKSTART.md) for instant setup without MongoDB/Redis.

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Node](https://img.shields.io/badge/node-%3E%3D20.0.0-brightgreen.svg)
![TypeScript](https://img.shields.io/badge/typescript-5.3-blue.svg)
![React](https://img.shields.io/badge/react-18.2-blue.svg)
![Discord.js](https://img.shields.io/badge/discord.js-14.x-5865f2.svg)

## üìã Table of Contents

- [Features](#-features)
- [Tech Stack](#-tech-stack)
- [Prerequisites](#-prerequisites)
- [Installation](#-installation)
- [Configuration](#-configuration)
- [Development](#-development)
- [Deployment](#-deployment)
- [API Documentation](#-api-documentation)
- [Project Structure](#-project-structure)
- [Contributing](#-contributing)
- [License](#-license)

## ‚ú® Features

### Discord Bot
- ‚úÖ **Multi-Server Support** - Unbegrenzte Anzahl von Servern
- ‚úÖ **Slash Commands** - Modernes Discord Command System
- ‚úÖ **Event Handler** - Umfassendes Event-Management
- ‚úÖ **Permission System** - Rollenbasierte Berechtigungen
- ‚úÖ **Rate Limiting** - Spam-Schutz und API-Limits
- ‚úÖ **Auto-Reconnect** - Automatische Verbindungswiederherstellung
- ‚úÖ **Logging System** - Strukturierte Logs mit Winston

### Auto-Moderation
- üõ°Ô∏è **Spam Detection** - Intelligente Spam-Erkennung
- üõ°Ô∏è **Profanity Filter** - Konfigurierbarer Wortfilter
- üõ°Ô∏è **Link Filtering** - URL Whitelist/Blacklist
- üõ°Ô∏è **Raid Protection** - Schutz vor Mass-Joins
- üõ°Ô∏è **AI Moderation** - Optional mit OpenAI Integration
- üõ°Ô∏è **Auto-Actions** - Automatische Warns, Kicks, Bans
- üõ°Ô∏è **Appeal System** - User k√∂nnen Appeals einreichen

### Custom Commands
- üé® **Visual Command Builder** - Drag & Drop Editor
- üé® **Multiple Trigger Types** - Text, Regex, Slash Commands
- üé® **Rich Responses** - Text, Embeds, Reactions, DMs
- üé® **Variables System** - Dynamische Variablen
- üé® **Conditional Logic** - If-Then-Else Strukturen
- üé® **Cooldown System** - Pro User/Channel/Global
- üé® **Import/Export** - Commands als JSON

### Analytics & Reporting
- üìä **Real-time Metrics** - Live Dashboard
- üìä **Historical Data** - Langzeit-Statistiken
- üìä **Growth Charts** - Member-Wachstum
- üìä **Activity Heatmaps** - Zeit-basierte Analysen
- üìä **User Engagement** - Engagement-Scores
- üìä **Export Functions** - PDF/CSV Reports

### Web Dashboard
- üñ•Ô∏è **Discord OAuth2** - Sichere Authentifizierung
- üñ•Ô∏è **Server Management** - Multi-Server Support
- üñ•Ô∏è **Role Management** - Rollen-Hierarchie
- üñ•Ô∏è **Real-time Updates** - Live WebSocket Updates
- üñ•Ô∏è **Responsive Design** - Mobile, Tablet, Desktop
- üñ•Ô∏è **Dark/Light Mode** - Benutzer-pr√§ferenzen

## üõ†Ô∏è Technologie-Stack

### Backend
- **Node.js** 20.x - Runtime Environment
- **TypeScript** 5.x - Type Safety
- **discord.js** 14.x - Discord API Wrapper
- **Express.js** 4.x - Web Framework
- **Socket.io** 4.x - Real-time Communication
- **MongoDB** 7.x - Database
- **Redis** 7.x - Caching & Sessions
- **JWT** - Authentication
- **bcrypt** - Password Hashing

### Frontend
- **React** 18.x - UI Framework
- **Vite** - Build Tool
- **TypeScript** - Type Safety
- **Tailwind CSS** 3.x - Styling
- **Shadcn/ui** - UI Components
- **Zustand** - State Management
- **TanStack Query** - Data Fetching
- **Chart.js** 4.x - Data Visualization
- **React Router** v6 - Routing

### DevOps
- **Docker** & **Docker Compose** - Containerization
- **GitHub Actions** - CI/CD
- **ESLint** & **Prettier** - Code Quality
- **Jest** - Testing

## üì¶ Voraussetzungen

- Node.js >= 20.0.0
- npm >= 10.0.0
- Discord Bot Token & Application

**Optional** (f√ºr Production mit Persistenz):
- MongoDB >= 7.0 (sonst wird In-Memory DB verwendet)
- Redis >= 7.0 (sonst wird In-Memory Cache verwendet)
- Docker & Docker Compose (optional, empfohlen)

> üí° **Neu**: Du kannst den Bot komplett ohne MongoDB/Redis betreiben!  
> Siehe [FALLBACK.md](./FALLBACK.md) f√ºr Details zum In-Memory Modus.

## üöÄ Installation

### 1. Clone Repository

```bash
git clone https://github.com/yourusername/discord-bot-dashboard.git
cd discord-bot-dashboard
```

### 2. Install Dependencies

```bash
# Root dependencies
npm install

# Install all workspace dependencies
npm install --workspaces
```

### 3. Setup Environment Variables

```bash
# Kopiere die Beispiel-Datei
cp .env.example .env

# Bearbeite .env und f√ºge deine Discord-Credentials ein
```

**Minimal-Konfiguration** (Development ohne externe DBs):
```env
# Nur Discord Credentials erforderlich!
DISCORD_TOKEN=your_bot_token
DISCORD_CLIENT_ID=your_client_id
DISCORD_CLIENT_SECRET=your_client_secret

# Lasse MongoDB/Redis leer f√ºr In-Memory Modus
MONGODB_URI=
REDIS_URL=

# Secrets
JWT_SECRET=generate_random_string_here
SESSION_SECRET=another_random_string_here
```

**Vollst√§ndige Konfiguration** (Production mit Persistenz):
```env
# Discord Credentials
DISCORD_TOKEN=your_bot_token
DISCORD_CLIENT_ID=your_client_id
DISCORD_CLIENT_SECRET=your_client_secret

# Datenbanken (f√ºr Persistenz)
MONGODB_URI=mongodb://mongodb:27017/discord-bot-dashboard
REDIS_URL=redis://redis:6379
```

### 4. Discord Bot erstellen

1. Gehe zu https://discord.com/developers/applications
2. Erstelle eine neue Application
3. Gehe zu "Bot" und erstelle einen Bot
4. Kopiere den Token und f√ºge ihn in `.env` ein
5. Aktiviere folgende Intents:
   - Presence Intent
   - Server Members Intent
   - Message Content Intent
6. Gehe zu "OAuth2" und kopiere Client ID & Secret

### 5. Bot einladen

Erstelle eine Einladungs-URL mit folgenden Permissions:
```
https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&permissions=8&scope=bot%20applications.commands
```

## ‚öôÔ∏è Konfiguration

### Umgebungsvariablen (.env)

```env
# Discord Configuration
DISCORD_TOKEN=your_bot_token
DISCORD_CLIENT_ID=your_client_id
DISCORD_CLIENT_SECRET=your_client_secret
DISCORD_REDIRECT_URI=http://localhost:3000/auth/callback

# Database
MONGODB_URI=mongodb://mongodb:27017/discord-bot-dashboard
REDIS_URL=redis://redis:6379

# API
API_PORT=5000
FRONTEND_URL=http://localhost:5173
JWT_SECRET=your-super-secret-jwt-key
SESSION_SECRET=your-session-secret

# Optional: OpenAI f√ºr AI Moderation
OPENAI_API_KEY=your_openai_key

# Optional: SMTP f√ºr Email Reports
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
```

## üíª Entwicklung

### üöÄ Ohne Docker (Lokaler Modus - OHNE externe Datenbanken!)

```bash
# Install dependencies
npm install
npm install --workspaces

# Minimal .env (nur Discord Credentials!)
# MONGODB_URI und REDIS_URL leer lassen oder auskommentieren

# Start development servers
npm run dev --workspace=bot       # Bot (nutzt In-Memory DB)
npm run dev --workspace=api       # API (nutzt In-Memory Cache)
npm run dev --workspace=frontend  # Frontend

# ‚úÖ Bot l√§uft jetzt komplett ohne MongoDB/Redis!
```

> üí° **Tipp**: Im In-Memory Modus sind alle Daten nach Neustart weg.  
> F√ºr Persistenz siehe [FALLBACK.md](./FALLBACK.md)

Die Services werden verf√ºgbar unter:
- **Bot**: L√§uft im Hintergrund (In-Memory DB)
- **API**: http://localhost:5000 (In-Memory Cache)
- **Frontend**: http://localhost:5173

### üê≥ Mit Docker (Empfohlen f√ºr Production)

```bash
# Alle Services starten (inkl. MongoDB & Redis)
docker-compose up -d

# Logs anzeigen
docker-compose logs -f

# Services stoppen
docker-compose down
```

Die Services werden verf√ºgbar unter:
- **Bot**: L√§uft im Hintergrund
- **API**: http://localhost:5000
- **Frontend**: http://localhost:5173
- **MongoDB**: localhost:27017
- **Redis**: localhost:6379

# Terminal 3: Frontend starten
npm run dev:frontend
```

### Development Scripts

```bash
# Alle Services im Dev-Modus
npm run dev

# Einzelne Services
npm run dev:bot
npm run dev:api
npm run dev:frontend

# Build
npm run build

# Tests
npm run test

# Linting
npm run lint

# Formatting
npm run format
```

## üìù Bot Commands

### Setup Commands
- `/setup` - Initiale Bot-Konfiguration
- `/help` - Hilfe und Befehls√ºbersicht

### Info Commands
- `/stats` - Server-Statistiken
- `/serverinfo` - Detaillierte Server-Informationen
- `/userinfo [@user]` - Benutzer-Informationen

### Moderation Commands
- `/moderate warn @user [reason]` - Benutzer verwarnen
- `/moderate kick @user [reason]` - Benutzer kicken
- `/moderate ban @user [reason]` - Benutzer bannen
- `/moderate timeout @user [duration] [reason]` - Timeout geben
- `/modlog @user` - Moderations-Historie anzeigen

### Custom Commands
- Verwalte Custom Commands √ºber das Web-Dashboard

## üåê API Dokumentation

### Base URL
```
http://localhost:5000/api
```

### Authentifizierung

Alle gesch√ºtzten Endpoints ben√∂tigen einen JWT Token:

```bash
Authorization: Bearer <your-jwt-token>
```

### Hauptendpoints

#### Authentication
```http
GET  /api/auth/discord          # Discord OAuth2 Login
GET  /api/auth/callback         # OAuth2 Callback
POST /api/auth/refresh          # Refresh Token
POST /api/auth/logout           # Logout
```

#### Guilds
```http
GET    /api/guilds              # Alle Server des Users
GET    /api/guilds/:guildId     # Spezifischer Server
PATCH  /api/guilds/:guildId     # Server-Einstellungen updaten
```

#### Analytics
```http
GET /api/analytics/:guildId/overview       # √úbersicht
GET /api/analytics/:guildId/members        # Member-Statistiken
GET /api/analytics/:guildId/messages       # Message-Statistiken
GET /api/analytics/:guildId/export         # Daten exportieren
```

#### Moderation
```http
GET    /api/moderation/:guildId/logs       # Moderations-Logs
GET    /api/moderation/:guildId/warnings   # Aktive Warnings
POST   /api/moderation/:guildId/appeal     # Appeal einreichen
PATCH  /api/moderation/:guildId/case/:id   # Case aktualisieren
```

#### Custom Commands
```http
GET    /api/commands/:guildId              # Alle Commands
POST   /api/commands/:guildId              # Command erstellen
PATCH  /api/commands/:guildId/:commandId   # Command updaten
DELETE /api/commands/:guildId/:commandId   # Command l√∂schen
```

### WebSocket Events

```javascript
// Client -> Server
socket.emit('join-guild', { guildId });
socket.emit('leave-guild', { guildId });

// Server -> Client
socket.on('member-count', data);
socket.on('message-created', data);
socket.on('member-joined', data);
socket.on('member-left', data);
```

## üìÅ Projektstruktur

```
discord-bot-dashboard/
‚îú‚îÄ‚îÄ bot/                          # Discord Bot
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands/            # Slash Commands
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/              # Event Handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Business Logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/              # Database Models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # Utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/              # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot.ts               # Bot Client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts             # Entry Point
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ api/                          # REST API & WebSocket
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/              # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # Route Controllers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Custom Middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Business Logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/              # Shared Models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ websocket/           # Socket.IO Logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # Utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/              # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.ts               # Express App
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts             # Entry Point
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/                     # React Frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/               # Page Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Reusable Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/               # Custom Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # API Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/               # State Management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # Utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/               # TypeScript Types
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx              # Main App
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.tsx             # Entry Point
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.dev
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ nginx/                        # Nginx Configuration
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # Utility Scripts
‚îÇ   ‚îî‚îÄ‚îÄ mongo-init.js
‚îÇ
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/               # GitHub Actions
‚îÇ       ‚îú‚îÄ‚îÄ ci.yml
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .eslintrc.json
‚îú‚îÄ‚îÄ .prettierrc
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## üê≥ Docker Deployment

### Development (Lokal)

```bash
docker-compose up -d
```

### Production

```bash
# Build production images
docker-compose -f docker-compose.prod.yml build

# Start production services
docker-compose -f docker-compose.prod.yml up -d
```

### Environment-spezifische Overrides

```bash
# Development
docker-compose up

# Production
docker-compose --profile production up
```

## ‚òÅÔ∏è Cloud Deployment (Vercel + Railway/Render)

### Kostenlose Hosting-L√∂sung

**Frontend auf Vercel (Kostenlos)**
```powershell
# Quick Deploy
.\deploy-vercel.ps1

# Oder manuell
cd frontend
vercel
```

**Backend auf Railway/Render (Free Tier)**
- Siehe [DEPLOYMENT.md](./DEPLOYMENT.md) f√ºr detaillierte Anleitung
- Railway: $5 Free Credits/Monat
- Render: Komplett kostenlos (mit Cold Start)

**Datenbanken (Kostenlos)**
- MongoDB Atlas: 512MB Free
- Redis Cloud: 30MB Free

üìñ **Vollst√§ndige Anleitung**: [DEPLOYMENT.md](./DEPLOYMENT.md)

## üîí Sicherheit

### Implementierte Sicherheitsma√ünahmen

- ‚úÖ **HTTPS/WSS Only** (TLS 1.3 in Production)
- ‚úÖ **Helmet.js** - Security Headers
- ‚úÖ **Rate Limiting** - API & Auth Endpoints
- ‚úÖ **Input Sanitization** - MongoDB Sanitization
- ‚úÖ **CSRF Protection** - Cookie-basiert
- ‚úÖ **JWT Authentication** - Sichere Token-basierte Auth
- ‚úÖ **Password Hashing** - bcrypt
- ‚úÖ **Environment Variables** - Keine Hardcoded Secrets
- ‚úÖ **CORS Configuration** - Whitelist-basiert

### GDPR Compliance

- ‚úÖ **Daten-Minimierung** - Nur notwendige Daten
- ‚úÖ **Right to Access** - User k√∂nnen Daten exportieren
- ‚úÖ **Right to be Forgotten** - User k√∂nnen Daten l√∂schen
- ‚úÖ **Data Retention** - Auto-Delete nach 90 Tagen
- ‚úÖ **Privacy Policy** - Enthalten
- ‚úÖ **Cookie Consent** - Banner implementiert
- ‚úÖ **Verschl√ºsselung** - Sensitive Daten encrypted

## üìä Monitoring & Logging

### Logging

Logs werden in folgende Dateien geschrieben:
- `logs/combined-YYYY-MM-DD.log` - Alle Logs
- `logs/error-YYYY-MM-DD.log` - Nur Fehler

### Health Checks

```bash
# API Health Check
curl http://localhost:5000/health

# Bot Health Check (Docker)
docker exec discord-bot node healthcheck.js
```

## üß™ Testing

```bash
# Alle Tests ausf√ºhren
npm run test

# Tests mit Coverage
npm run test:coverage

# Tests im Watch-Modus
npm run test:watch

# Spezifisches Modul testen
npm run test --workspace=bot
npm run test --workspace=api
npm run test --workspace=frontend
```

## üö¢ CI/CD

Das Projekt nutzt GitHub Actions f√ºr automatisierte Workflows:

### Workflows

1. **CI Pipeline** (`.github/workflows/ci.yml`)
   - Linting
   - Type Checking
   - Unit Tests
   - Build Verification

2. **Deploy Pipeline** (`.github/workflows/deploy.yml`)
   - Production Build
   - Docker Image Build
   - Deployment zu Server

## üìñ Weitere Dokumentation

- [API Documentation](./docs/API.md)
- [Bot Commands](./docs/COMMANDS.md)
- [Database Schema](./docs/DATABASE.md)
- [Contributing Guidelines](./CONTRIBUTING.md)
- [Changelog](./CHANGELOG.md)

## ü§ù Contributing

Contributions sind willkommen! Bitte lies [CONTRIBUTING.md](./CONTRIBUTING.md) f√ºr Details.

### Development Workflow

1. Fork das Repository
2. Erstelle einen Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit deine Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push zum Branch (`git push origin feature/AmazingFeature`)
5. √ñffne einen Pull Request

## üìú License

Dieses Projekt ist unter der MIT License lizenziert - siehe [LICENSE](./LICENSE) f√ºr Details.

## üë• Support

- üìß Email: support@yourdomain.com
- üí¨ Discord: [Support Server](https://discord.gg/your-invite)
- üêõ Issues: [GitHub Issues](https://github.com/yourusername/discord-bot-dashboard/issues)

## üôè Danksagungen

- [discord.js](https://discord.js.org/) - Discord API Wrapper
- [Express.js](https://expressjs.com/) - Web Framework
- [React](https://reactjs.org/) - UI Library
- [Tailwind CSS](https://tailwindcss.com/) - CSS Framework
- [shadcn/ui](https://ui.shadcn.com/) - UI Components

---

**Made with ‚ù§Ô∏è for the Discord Community**
